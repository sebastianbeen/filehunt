var linebreak=document.createElement("br");function deleteOwnFile(a){var b=confirm("Are you sure that you want to delete that file?");if(b==true){$.get("reference.php",{f:a,func:"delete_file",},function(c){$("#center").empty();
myprofile();});}}function reportFile(a){$.get("reference.php",{func:"isloggedin",},function(b){if(b!="false"){var c=confirm("Are you sure that you want to report this file as abuse?");
if(c==true){$.get("reference.php",{func:"report_abuse",file:a,},function(d){var e=document.getElementById("success");$("#success").html("The file has reported. Thank you").hide().fadeIn();
});}}else{window.location.href="?page=login&attemptedSite=report_abuse&reportedFile="+a;}});}function adminDeleteFile(a){var b=confirm("Are you sure that you want to delete that file?");
if(b==true){window.location.href="?page=delete_file_admin&fileID="+a;}}function deleteReport(a){var b=confirm("Are you sure that you want to delete the report?");
if(b==true){window.location.href="?page=delete_report&file="+a;}}function calChars(c){var a=document.getElementById("count");var b=255-c.value.length;a.innerHTML=b+" characters left";
}function plusCount(d){if(event.keyCode=="8"||event.keyCode=="46"){var b=document.getElementById("count");var c=d.value.length;var a=255-c+1;b.innerHTML=a+" characters left";
}}function copyToClipboard(a){window.prompt("Copy to clipboard: Ctrl+C, Enter",a);}function validateFacebook(){url="https://graph.facebook.com/"+document.user_pref.facebook_id.value;
$.get(url,function(a){console.log(a);});}function validateTwitter(){$.get("https://api.twitter.com/1/users/show.json",{screen_name:"theadamlt",include_entities:"false",},function(a){console.log(a);
});}function userPref(){var c=document.user_pref.real_name.value;var b=document.user_pref.email.value;var f=document.user_pref.show_name.checked;var a=document.user_pref.show_mail.checked;
var d=document.user_pref.twitter_id.value;var e=document.user_pref.facebook_id.value;if(!empty(c)&&validateEmail(b)){$.get("reference.php",{func:"user_pref",real_name:c,email:b,show_real_name:f,show_email:a,twitter_id:d,facebook_id:e,},function(g){if(g=="true"){$(".upError").fadeOut();
$(".upSuccess").empty();$(".upSuccess").hide().html("Your preferences has successfully been updated").fadeIn();$("html,body").animate({scrollTop:$(".upSuccess").offset().top},1000);
}else{$(".upSuccess").fadeOut();$(".upError").empty();$(".upError").hide().html("Something went wrong. Please try again later").fadeIn();$("html,body").animate({scrollTop:$(".upError").offset().top},1000);
}});}else{$(".upSuccess").fadeOut();$(".upError").hide().html("Something's not right. The entered name or email is invalid").fadeIn();$("html,body").animate({scrollTop:$(".upError").offset().top},1000);
}return false;}function newPassword(){var b=MD5(document.newpassword.password.value);var c=MD5(document.newpassword.password2.value);var a=MD5(document.newpassword.curpassword.value);
if(b==c&&b.length>5){$.get("reference.php",{func:"new_password",p1:b,p2:c,cp:a,},function(d){if(d=="false"){$(".npError").hide().html("Something went wrong. Maybe your current password was wrong, or the new passwords didn't match?").fadeIn();
$("html,body").animate({scrollTop:$(".npError").offset().top},1000);}else{$(".npSuccess").hide().html("Your password has been changed").fadeIn("slow");
$("html,body").animate({scrollTop:$("#success").offset().top},1000);$(".npError").fadeOut();$("#np").removeAttr("open");document.newpassword.password.value=null;
document.newpassword.password2.value=null;document.newpassword.curpassword.value=null;}});}else{$(".npError").hide().html("Something went wrong. Maybe your current password was entered wrong, or the new passwords didn't match? The password must be over 5 characters").fadeIn();
}return false;}var reset_passwordArray=new Array();reset_passwordArray.password="false";reset_passwordArray.password2="false";function validate_password_reset(){if(reset_passwordArray.password=="true"&&reset_passwordArray.password2=="true"){document.reset.password.value=MD5(document.reset.password.value);
document.reset.password2.value=MD5(document.reset.password2.value);return true;}else{return false;}}function validateResetPassword1(){if(document.reset.password.value.length>5){if(document.getElementById("password_error")){$("#password_error").remove();
}if(!document.getElementById("password_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered password is valid!");
$("#password2").removeAttr("readonly");$("#password_label").prepend(successMessage);reset_passwordArray.password="true";}}else{if(document.getElementById("password_success")){$("#password_success").remove();
}if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password is invalid. Must be over 5 characters");
$("#password_label").prepend(errorMessage);$("#password2").attr("readonly","readonly");reset_passwordArray.password="false";}}}function validateResetPassword2(){if(document.reset.password.value==document.reset.password2.value){if(document.getElementById("password2_error")){$("#password2_error").remove();
}if(!document.getElementById("password2_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password2_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered passwords is matching!");
$("#password2_label").prepend(successMessage);reset_passwordArray.password2="true";}}else{if(document.getElementById("password2_success")){$("#password2_success").remove();
}if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered passwords doesn't match");
$("#password2_label").prepend(errorMessage);reset_passwordArray.password2="false";}}}function validateUsername(b){var a=/^[A-Za-z0-9 ]{3,20}$/;return a.test(b);
}function validateEmail(a){var b=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test(a);}function validatePassword(a){if(a.length>5){return true;
}else{return false;}}function validatePasswordMatch(b,a){if(b==a){return true;}else{return false;}}function validateSignupOnsubmit(){$.get("validate.php",{func:"signup_all",recaptcha_challenge_field:document.getElementById("recaptcha_challenge_field").value,recaptcha_response_field:document.getElementById("recaptcha_response_field").value,u:document.signup.username.value,e:document.signup.email.value},function(d){var i=document.signup.password.value;
var b=document.signup.password2.value;var e=document.signup.username.value;var g=document.signup.email.value;if(d=="true"){if(validatePassword(i)){var a=true;
}else{if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");
$("#password_label").prepend(errorMessage);}var a=false;}if(validatePasswordMatch(i,b)&&a==true){var c=true;}else{if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords does not match");$("#password_label2").prepend(errorMessage);}var c=false;}if(!validateEmail(g)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}var f=false;}else{var f=true;
}if(!validateUsername(e)){if(!document.getElementById("username_error")){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");
errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");errorImg.setAttribute("title","The entered username is either not available or invalid");
$("#username_label").prepend(errorImg);}username_success=false;}else{username_success=true;}if(f==true&&username_success==true&&a==true&&c==true){$.get("reference.php",{func:"signup",username:e,email:g,password:MD5(i),recaptcha_challenge_field:document.signup.recaptcha_challenge_field.value,recaptcha_response_field:document.signup.recaptcha_response_field.value,},function(j){console.log(j);
if(j=="capcha_error"){window.location="?page=signup&capchaError=true";}else{window.location.href="?page=search&signupCompleted=true";}});}else{}}else{var h=$.parseJSON(d);
if(h.username_available=="false"){if(!document.getElementById("username_error")){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");
errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");errorImg.setAttribute("title","The entered username is either not available or invalid");
$("#username_label").prepend(errorImg);}}else{if(!validateUsername(e)){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");
errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");errorImg.setAttribute("title","The entered username is either not available or invalid");
$("#username_label").prepend(errorImg);}}if(h.email_available=="false"){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}else{if(!validateEmail(g)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}}if(!validatePassword(i)){if(!document.getElementById("password_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");$("#password_label").prepend(errorMessage);}password_length=false;
}else{password_length=true;}if(!validatePasswordMatch(i,b)&&password_length==false){if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords does not match");$("#password_label2").prepend(errorMessage);}}}});}function myprofile(){$.post("reference.php",{func:"myprofile",},function(h){var n=$.parseJSON(h);
if(n.length>0){var a=document.getElementById("center");var m=document.createElement("table");m.setAttribute("id","table");var g=document.createElement("tr");
var c=document.createElement("th");c.innerHTML="Filename";var b=document.createElement("th");b.innerHTML="Delete file";g.appendChild(c);g.appendChild(b);
m.appendChild(g);a.appendChild(m);for(var j=0;j<n.length;j++){var l=n[j]["rowID"];var f=n[j]["file"];var o=document.createElement("tr");if(isEven(j)){o.setAttribute("class","alt");
}var e=document.createElement("td");var k=document.createElement("a");k.setAttribute("href","?page=fileinfo&fileID="+l);k.innerHTML=f;e.appendChild(k);
var d=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("title","Delete file");td2Link.setAttribute("onclick","deleteOwnFile("+l+",myprofile)");
td2Link.setAttribute("href","#");td2Img=document.createElement("img");td2Img.setAttribute("src","./img/trash.png");td2Img.setAttribute("height","32");td2Img.setAttribute("width","32");
td2Link.appendChild(td2Img);d.appendChild(td2Link);o.appendChild(e);o.appendChild(d);$("#table").append(o);}}else{errorMessage=document.createElement("div");
errorMessage.setAttribute("id","error");errorMessage.innerHTML="You have no uploads!";$("#center").append(errorMessage);}});}function mySubscriptions(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscriptions",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribtions("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").prepend(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscriptions";$("#mysubs").prepend(f);}});}function mySubscribers(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscribers",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribers("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").append(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscribers";$("#mysubs").append(f);}});}function myNewFiles(){$("#center").empty();$.get("reference.php",{func:"mysubscriptions",action:"files",},function(w){var t=$.parseJSON(w);
if(t.length>0){var n=document.getElementById("center");var g=document.createElement("br");n.appendChild(g);var u=document.createElement("table");u.setAttribute("id","table");
var j=document.createElement("tr");var e=document.createElement("th");e.innerHTML="Filename";var d=document.createElement("th");d.innerHTML="Uploaded by";
var b=document.createElement("th");b.innerHTML="Uploaded date";j.appendChild(e);j.appendChild(d);j.appendChild(b);u.appendChild(j);n.appendChild(u);for(var r=0;
r<t.length;r++){var c=t[r]["f_rowID"];var v=t[r]["f_file"];var s=t[r]["f_uploaded_by"];var l=t[r]["u_username"];var p=t[r]["f_uploaded_date"];var k=document.createElement("tr");
if(isEven(r)){k.setAttribute("class","alt");}var h=document.createElement("td");var o=document.createElement("a");o.setAttribute("href","?page=fileinfo&fileID="+c);
o.innerHTML=v;h.appendChild(o);var f=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("href","?page=profile&userID="+l);
td2Link.innerHTML=l;f.appendChild(td2Link);td3=document.createElement("td");td3.innerHTML=timeConverter(p);k.appendChild(h);k.appendChild(f);k.appendChild(td3);
u.appendChild(k);}$("#center").append(u);g=document.createElement("br");$("#center").append(g);var q=document.createElement("span");q.setAttribute("class","submit");
var a=document.createElement("input");a.setAttribute("type","button");a.setAttribute("onclick","clearSubList()");a.setAttribute("value","Clear list");q.appendChild(a);
$("#center").append(q);}else{var m=document.createElement("div");m.setAttribute("id","error");m.innerHTML="You have no unseen files";var g=document.createElement("br");
$("#center").append(g);$("#center").append(m);}});}function clearSubList(){$.get("reference.php",{func:"clear_sub_list",},function(b){var a=document.getElementById("mysubsbar");
$.get("reference.php",{func:"mysubscriptions",action:"files_num",},function(c){a.innerHTML="Subscriptions ("+c+")";myNewFiles();});});}function loadComments(a){$("#comments").empty();
$.get("reference.php",{func:"comments",file:a,},function(b){var r=document.createElement("h1");r.innerHTML="Comments";$("#comments").append(r);if(b=="false"){if(isLoggedIn()!="false"){var q=document.createElement("div");
q.setAttribute("id","error");q.innerHTML="There is no comments for this file. Why dont you leave one?";var l=document.createElement("br");$("#comments").append(l);
$("#comments").append(q);}}else{var t=$.parseJSON(b);var u=document.createElement("table");u.setAttribute("id","table");var n=document.createElement("tr");
var h=document.createElement("th");h.innerHTML="Comment by";var g=document.createElement("th");g.innerHTML="Date commented";var e=document.createElement("th");
e.innerHTML="Comment";n.appendChild(h);n.appendChild(g);n.appendChild(e);u.appendChild(n);for(var s=0;s<t.length;s++){var f=t[s]["user_row"];var j=t[s]["username"];
var c=t[s]["comment"];var d=t[s]["date_commented"];var o=document.createElement("tr");if(isEven(s)){o.setAttribute("class","alt");}var m=document.createElement("td");
var p=document.createElement("a");p.setAttribute("href","?page=profile&userID="+f);p.innerHTML=j;m.appendChild(p);var k=document.createElement("td");k.innerHTML=timeConverter(d);
td3=document.createElement("td");td3.innerHTML=c;o.appendChild(m);o.appendChild(k);o.appendChild(td3);u.appendChild(o);}$("#comments").append(u);}});}function fileInfo(){var a=qs.fileID;
$.get("reference.php",{func:"fileinfo",file:a,action:"is_reported",},function(b){if(b=="true"){var c=document.createElement("div");c.setAttribute("id","error");
c.innerHTML="Be careful! This file has been reported at abuse! We are on the case. You can still download the file, but: BE CAREFUL!";$("#warning").prepend(c);
}});$.get("reference.php",{func:"fileinfo",action:"fileinfo",file:a,},function(b){if(b=="false"){window.location.href="?page=search";}else{var A=$.parseJSON(b);
var f=A[0]["f_rowID"];var z=A[0]["f_uploaded_by"];var m=A[0]["u_username"];var g=A[0]["u_rowID"];var y=A[0]["f_uploaded_date"];var k=A[0]["f_mimetype"];
var v=A[0]["f_size"];var C=A[0]["f_file"];var x=A[0]["f_description"];$("#header").html(C);var B=document.createElement("table");B.setAttribute("id","table");
var s=document.createElement("th");s.innerHTML="Uploaded by";var r=document.createElement("th");r.innerHTML="Size";var q=document.createElement("th");q.innerHTML="Date uploaded";
var p=document.createElement("th");p.innerHTML="Mimetype";if(k.substring(0,6)=="image/"){var o=document.createElement("th");o.innerHTML="Dimension";}var n=document.createElement("th");
n.innerHTML="Times downloaded";B.appendChild(s);B.appendChild(r);B.appendChild(q);B.appendChild(p);if(k.substring(0,6)=="image/"){B.appendChild(o);}B.appendChild(n);
var l=document.createElement("tr");l.setAttribute("class","alt");var j=document.createElement("td");td1Link=document.createElement("a");td1Link.setAttribute("href","?page=profile&userID="+g);
td1Link.innerHTML=m;j.appendChild(td1Link);var h=document.createElement("td");h.innerHTML=calcFileSize(v);td3=document.createElement("td");td3.innerHTML=timeConverter(y);
td4=document.createElement("td");td4.innerHTML=k;if(k.substring(0,6)=="image/"){var e=document.createElement("td");var D=new Image();D.src="./printimage.php?id="+f;
D.onload=function(){width=this.width;height=this.height;e.innerHTML="Height: "+height+"Width: "+width;};}var c=document.createElement("td");var w=document.createElement("a");
w.setAttribute("href","?page=download_analysis&file="+a);w.setAttribute("id","timesDownloaded");$.get("reference.php",{func:"fileinfo",action:"times_downloaded",file:a,},function(E){w.innerHTML=E;
});c.appendChild(w);l.appendChild(j);l.appendChild(h);l.appendChild(td3);l.appendChild(td4);if(k.substring(0,6)=="image/"){l.appendChild(e);}l.appendChild(c);
B.appendChild(l);$("#cont").prepend(B);var i=document.createElement("br");$("#cont").append(i);$("#cont").append(i);$("#cont").append(i);}var k=A[0]["f_mimetype"];
var f=A[0]["f_rowID"];if(!empty(x)){var t=document.createElement("fieldset");var d=document.createElement("legend");d.innerHTML="Description";t.innerHTML=x;
t.appendChild(d);$("#cont").append(t);}if(k.substring(0,6)=="image/"){var u=document.createElement("img");u.setAttribute("src","printimage.php?id="+f);
u.style.width="30%";u.style.height="auto";var i=document.createElement("br");$("#cont").append(i);$("#cont").append(u);}});loadComments(a);$.get("reference.php",{func:"isloggedin",},function(c){if(c!="false"){var i=document.createElement("br");
$("#commentform").append(i);var b=document.createElement("form");b.setAttribute("class","form");b.setAttribute("name","comment");var e=document.createElement("span");
textArea1=document.createElement("textarea");textArea1.setAttribute("name","comment");textArea1.setAttribute("cols","40");textArea1.setAttribute("rows","6");
textArea1.setAttribute("Placeholder","Comment");textArea1.setAttribute("id","message");e.appendChild(textArea1);var d=document.createElement("p");d.setAttribute("class","submit");
var f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","submit");f.setAttribute("value","true");var h=document.createElement("input");
h.setAttribute("value","Submit");h.setAttribute("type","button");h.setAttribute("onclick","placeComment()");d.appendChild(h);b.appendChild(f);b.appendChild(e);
b.appendChild(d);$("#commentform").append(b);}else{var g=document.createElement("div");g.setAttribute("id","error");g.innerHTML="In order to comment, you need to ";
var j=document.createElement("a");j.setAttribute("href","?page=login&attemptedSite=fileinfo&file="+a);j.innerHTML="login";g.appendChild(j);$("#commentform").append(g);
}});}function placeComment(){var a=qs.fileID;if(document.comment.comment.value!=""){$.get("reference.php",{func:"place_comment",comment:document.comment.comment.value,file:a,},function(c){loadComments(a);
document.comment.comment.value="";$(".rmMe").remove();});}else{var b=document.createElement("div");b.setAttribute("id","error");b.setAttribute("class","rmMe");
b.innerHTML="The textfield is not filled out correctly";$("#commentform").append(b);}}function reqLogin(){var b=document.login.remember.checked;var c=document.login.username.value;
var a=document.login.password.value;$.get("reference.php",{func:"login",u:c,p:MD5(a),remember:b,},function(d){if(d=="true"){if(qs.attemptedSite&&qs.attemptedSite=="report_abuse"&&qs.reportedFile){window.location.href="?page=report_abuse&reportedFile="+qs.reportedFile;
}else{if(qs.attemptedSite&&qs.fileID&&qs.attemptedSite=="fileinfo"){window.location.href="?page=fileinfo&fileID="+qs.fileID;}else{if(qs.attemptedSite){window.location.href="?page="+qs.attemptedSite;
}else{window.location.href="?page=search";}}}}else{$("#error").html("The username and password does not match").hide().fadeIn();$("html,body").animate({scrollTop:$("#error").offset().top},1000);
}});return false;}function forgotPassword(){var a=document.forgot_password.email.value;var b=document.forgot_password.username.value;$.get("reference.php",{func:"forgot_password",email:a,username:b,},function(c){if(c=="false"){$("#error").html("The entered username and email does not match").hide().fadeIn();
}else{if(c=="email_error"){$("#error").empty().html("An error occured. Please try again later").hide().fadeIn();}else{$("#error").empty();$("#forgot").empty();
$("#mes").remove();$("#success").html("An email has been sent to you at "+a).hide().fadeIn();}}});return false;}function navBar(){$.get("reference.php",{func:"isloggedin",},function(c){if(c!="false"){$.get("reference.php",{func:"mysubscriptions",action:"files_num",},function(n){var u=$.parseJSON(c);
var p=document.getElementById("links");var q=document.createElement("ul");var o=document.createElement("span");o.setAttribute("class","loggedin");o.innerHTML="Logged in as: "+u.username;
q.appendChild(o);var z=document.createElement("li");z.id="logout";var v=document.createElement("a");v.href="?page=logout";v.innerHTML="Logout";z.appendChild(v);
q.appendChild(z);var s=document.createElement("li");s.id="myprofile";var y=document.createElement("a");y.href="?page=myprofile";y.innerHTML="My profile";
s.appendChild(y);q.appendChild(s);var l=document.createElement("li");l.id="mysubscriptions";var j=document.createElement("a");j.href="?page=mysubscriptions";
j.id="mysubsbar";j.innerHTML="Subscriptions ("+n+")";l.appendChild(j);q.appendChild(l);var r=document.createElement("li");r.id="home";var k=document.createElement("a");
k.href="?page=search";k.innerHTML="Home";r.appendChild(k);q.appendChild(r);var x=document.createElement("li");x.id="home";var m=document.createElement("a");
m.href="?page=upload";m.innerHTML="Upload";x.appendChild(m);q.appendChild(x);if(u.admin=="1"){var t=document.createElement("li");t.id="admin";var w=document.createElement("a");
w.href="?page=admin";w.innerHTML="Admin";t.appendChild(w);q.appendChild(t);}p.appendChild(q);if(qs.page=="myprofile"||qs.page=="mysubscriptions"||qs.page=="upload"||qs.page=="admin"){document.getElementById(qs.page).setAttribute("class","current_page_item");
}else{if(qs.page=="user_pref"){document.getElementById("myprofile").setAttribute("class","current_page_item");}else{if(qs.page=="search"){document.getElementById("home").setAttribute("class","current_page_item");
}}}});}else{var f=document.getElementById("links");var g=document.createElement("ul");var e=document.createElement("li");e.id="signup";var a=document.createElement("a");
a.href="?page=signup";a.innerHTML="Signup";e.appendChild(a);g.appendChild(e);var i=document.createElement("li");i.id="login";var d=document.createElement("a");
d.href="?page=login";d.innerHTML="Login";i.appendChild(d);g.appendChild(i);var h=document.createElement("li");h.id="home";var b=document.createElement("a");
b.href="?page=search";b.innerHTML="Home";h.appendChild(b);g.appendChild(h);f.appendChild(g);if(qs.page!="search"){document.getElementById(qs.page).setAttribute("class","current_page_item");
}else{document.getElementById("home").setAttribute("class","current_page_item");}}});}function download(){var b=qs.fileID;window.location.href="download.php?file="+b;
var c=document.getElementById("timesDownloaded");var a=c.innerHTML;c.innerHTML=parseInt(a)+1;}function sendMail(){var a=document.mail.subject.value;var b=document.mail.message.value;
$.get("reference.php",{func:"mail",subject:a,message:b,},function(c){if(c=="false"){var d=document.createElement("div");d.id="error";d.innerHTML="An error occured. Please try again later";
$("#mes").append(d).hide().fadeIn();$("html,body").animate({scrollTop:$("#mes").offset().top},1000);}else{var e=document.createElement("div");e.id="success";
e.innerHTML="The mails was successfully sent";$("#mes").append(e).hide().fadeIn();$("html,body").animate({scrollTop:$("#mes").offset().top},1000);$("#mail").empty();
}});return false;}function profile(){var a=qs.userID;$.get("reference.php",{func:"profile",userID:a,},function(b){});}
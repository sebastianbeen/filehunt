function deleteOwnFile(a){var b=confirm("Are you sure that you want to delete that file?");if(b==true){window.location.href="?page=delete_file&fileID="+a;
}}function reportFile(a){$.get("reference.php",{func:"isloggedin",},function(b){if(b!="false"){var c=confirm("Are you sure that you want to report this file as abuse?");
if(c==true){$.get("reference.php",{func:"report_abuse",file:a,},function(d){var e=document.getElementById("success");e.innerHTML="The file has reported. Thank you";
});}}else{window.location.href="?page=login&attemptedSite=report_abuse&reportedFile="+a;}});}function adminDeleteFile(a){var b=confirm("Are you sure that you want to delete that file?");
if(b==true){window.location.href="?page=delete_file_admin&fileID="+a;}}function deleteReport(a){var b=confirm("Are you sure that you want to delete the report?");
if(b==true){window.location.href="?page=delete_report&file="+a;}}function calChars(c){var a=document.getElementById("count");var b=255-c.value.length;a.innerHTML=b+" characters left";
}function plusCount(d){if(event.keyCode=="8"||event.keyCode=="46"){var b=document.getElementById("count");var c=d.value.length;var a=255-c+1;b.innerHTML=a+" characters left";
}}function copyToClipboard(a){window.prompt("Copy to clipboard: Ctrl+C, Enter",a);}function validate_login(){document.login.password.value=MD5(document.login.password.value);
return true;}function validateFacebook(){url="https://graph.facebook.com/"+document.user_pref.facebook_id.value;$.ajax({url:url,dataType:"json",success:function(a){if(document.getElementById("facebook_error")){$("#facebook_error").remove();
}if(!document.getElementById("facebook_success")){fb_message=document.createElement("img");fb_message.setAttribute("id","facebook_success");fb_message.setAttribute("src","./img/success.png");
fb_message.setAttribute("height","16");fb_message.setAttribute("width","16");fb_message.setAttribute("title","The entered ID is valid. Username: "+a.name);
$("#facebook_label").prepend(fb_message);}},error:function(a){if(document.getElementById("facebook_success")){$("#facebook_success").remove();}if(!document.getElementById("facebook_error")){fb_message=document.createElement("img");
fb_message.setAttribute("id","facebook_error");fb_message.setAttribute("src","./img/error.png");fb_message.setAttribute("height","16");fb_message.setAttribute("width","16");
fb_message.setAttribute("title","The entered ID is invalid");$("#facebook_label").prepend(fb_message);}}});}function validateTwitter(){url="https://api.twitter.com/1/users/show.json";
$.ajax({url:"http://api.twitter.com/1/users/show.json?screen_name="+document.user_pref.twitter_id.value,dataType:"jsonp",success:function(a){if(document.getElementById("twitter_error")){$("#twitter_error").remove();
}if(!document.getElementById("twitter_success")){twitter_message=document.createElement("img");twitter_message.setAttribute("id","twitter_success");twitter_message.setAttribute("src","./img/success.png");
twitter_message.setAttribute("height","16");twitter_message.setAttribute("width","16");twitter_message.setAttribute("title","The entered ID is valid. Username: "+a.screen_name);
$("#twitter_label").prepend(twitter_message);}},error:function(){if(document.getElementById("twitter_success")){$("#twitter_success").remove();}if(!document.getElementById("twitter_error")){twitter_message=document.createElement("img");
twitter_message.setAttribute("id","twitter_error");twitter_message.setAttribute("src","./img/error.png");twitter_message.setAttribute("height","16");twitter_message.setAttribute("width","16");
twitter_message.setAttribute("title","The entered ID is invalid");$("#twitter_label").prepend(twitter_message);}},});}function validateUserPref(){if(document.getElementById("real_name_error")||document.getElementById("email_error")){return false;
}else{return true;}}function validateRealName(){if(document.user_pref.real_name.value==""){if(document.getElementById("real_name_success")){$("#real_name_success").remove();
}if(!document.getElementById("real_name_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","real_name_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered name is not valid");
$("#real_name_label").prepend(errorMessage);user_pref_array.real_name="false";}}else{if(document.getElementById("real_name_error")){$("#real_name_error").remove();
}if(!document.getElementById("real_name_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","real_name_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered name is valid!");
$("#real_name_label").prepend(successMessage);user_pref_array.real_name="true";}}}function validateEmail2(){if(document.user_pref.email.value!=""){$.get("validate.php?func=om&m="+document.user_pref.email.value+"&u="+document.user_pref.userid.value,function(a){if(a=="false"){if(document.getElementById("email_success")){$("#email_success").remove();
}if(!document.getElementById("email_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered email is either not available or invalid");
$("#email_label").prepend(errorMessage);user_pref_array.email="false";}}else{if(document.getElementById("email_error")){$("#email_error").remove();}if(!document.getElementById("email_success")){successMessage=document.createElement("img");
successMessage.setAttribute("id","email_success");successMessage.setAttribute("height","16");successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");
successMessage.setAttribute("title","The entered email is available and valid!");$("#email_label").prepend(successMessage);user_pref_array.email="true";
}}});}else{if(document.getElementById("email_success")){$("#email_success").remove();}if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);user_pref_array.email="false";
}}}var newpasswordArray=new Array();newpasswordArray.password1="false";newpasswordArray.password2="false";newpasswordArray.curpassword="false";function validate_new_password(){if(newpasswordArray.curpassword=="true"&&newpasswordArray.password1=="true"&&newpasswordArray.password2=="true"){document.newpassword.password.value=MD5(document.newpassword.password.value);
document.newpassword.password2.value=MD5(document.newpassword.password2.value);document.newpassword.curpassword.value=MD5(document.newpassword.curpassword.value);
return true;}else{if(!document.getElementById("errormessage")){el=document.createElement("td");el.setAttribute("id","errormessage");el.innerHTML="Somethings not right. Check the errors above";
$("#errormes").prepend(el);}if(newpasswordArray.curpassword=="false"&&!document.getElementById("curpassword_error")){errorImg=document.createElement("img");
errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","curpassword_error");
errorImg.setAttribute("title","The entered password is not right");$("#current_password_label").prepend(errorImg);}if(newpasswordArray.password1=="false"&&!document.getElementById("newpassword_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","newpassword_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered password is invalid. Must be over 5 characters");$("#newpassword_label").prepend(errorMessage);}if(newpasswordArray.password2=="false"&&!document.getElementById("newpassword2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","newpassword2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords doesn't match");$("#newpassword2_label").prepend(errorMessage);}return false;}}function validateNewPassword1(){if(document.newpassword.password.value.length>5){if(document.getElementById("newpassword_error")){$("#newpassword_error").remove();
}if(!document.getElementById("newpassword_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","newpassword_success");
successMessage.setAttribute("height","16");successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered password is valid!");
$("#password2").removeAttr("readonly");$("#newpassword_label").prepend(successMessage);newpasswordArray.password1="true";}}else{if(document.getElementById("newpassword_success")){$("#newpassword_success").remove();
}if(!document.getElementById("newpassword_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","newpassword_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password is invalid. Must be over 5 characters");
$("#newpassword_label").prepend(errorMessage);$("#password2").attr("readonly","readonly");newpasswordArray.password1="false";}}}function validateCurrentPassword(){$.get("validate.php?func=p&u="+document.user_pref.userid.value+"&p="+MD5(document.newpassword.curpassword.value),function(a){if(a=="false"){if(!document.getElementById("curpassword_error")){if(document.getElementById("curpassword_success")){$("#curpassword_success").remove();
}if(!document.getElementById("curpassword_error")){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");
errorImg.setAttribute("width","16");errorImg.setAttribute("id","curpassword_error");errorImg.setAttribute("title","The entered password is not right");
$("#current_password_label").prepend(errorImg);newpasswordArray.curpassword="false";}}}else{if(document.getElementById("curpassword_error")){$("#curpassword_error").remove();
}if(!document.getElementById("curpassword_success")){successImg=document.createElement("img");successImg.setAttribute("src","./img/success.png");successImg.setAttribute("height","16");
successImg.setAttribute("width","16");successImg.setAttribute("title","The entered password right!");successImg.setAttribute("id","curpassword_success");
$("#current_password_label").prepend(successImg);newpasswordArray.curpassword="true";}}});}function validateNewPassword2(){if(document.newpassword.password.value==document.newpassword.password2.value){if(document.getElementById("newpassword2_error")){$("#newpassword2_error").remove();
}if(!document.getElementById("newpassword2_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","newpassword2_success");
successMessage.setAttribute("height","16");successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered passwords is matching!");
$("#newpassword2_label").prepend(successMessage);newpasswordArray.password2="true";}}else{if(document.getElementById("newpassword2_success")){$("#newpassword2_success").remove();
}if(!document.getElementById("newpassword2_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","newpassword2_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered passwords doesn't match");
$("#newpassword2_label").prepend(errorMessage);newpasswordArray.password2="false";}}}var reset_passwordArray=new Array();reset_passwordArray.password="false";
reset_passwordArray.password2="false";function validate_password_reset(){if(reset_passwordArray.password=="true"&&reset_passwordArray.password2=="true"){document.reset.password.value=MD5(document.reset.password.value);
document.reset.password2.value=MD5(document.reset.password2.value);return true;}else{return false;}}function validateResetPassword1(){if(document.reset.password.value.length>5){if(document.getElementById("password_error")){$("#password_error").remove();
}if(!document.getElementById("password_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered password is valid!");
$("#password2").removeAttr("readonly");$("#password_label").prepend(successMessage);reset_passwordArray.password="true";}}else{if(document.getElementById("password_success")){$("#password_success").remove();
}if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password is invalid. Must be over 5 characters");
$("#password_label").prepend(errorMessage);$("#password2").attr("readonly","readonly");reset_passwordArray.password="false";}}}function validateResetPassword2(){if(document.reset.password.value==document.reset.password2.value){if(document.getElementById("password2_error")){$("#password2_error").remove();
}if(!document.getElementById("password2_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password2_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered passwords is matching!");
$("#password2_label").prepend(successMessage);reset_passwordArray.password2="true";}}else{if(document.getElementById("password2_success")){$("#password2_success").remove();
}if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered passwords doesn't match");
$("#password2_label").prepend(errorMessage);reset_passwordArray.password2="false";}}}function validateUsername(b){var a=/^[A-Za-z0-9 ]{3,20}$/;return a.test(b);
}function validateEmail(a){var b=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test(a);}function validatePassword(a){if(a.length>5){return true;
}else{return false;}}function validatePasswordMatch(b,a){if(b==a){return true;}else{return false;}}function validateSignupOnsubmit(){$.get("validate.php",{func:"signup_all",recaptcha_challenge_field:document.getElementById("recaptcha_challenge_field").value,recaptcha_response_field:document.getElementById("recaptcha_response_field").value,u:document.signup.username.value,e:document.signup.email.value},function(a){var c=document.signup.password.value;
var d=document.signup.password2.value;var f=document.signup.username.value;var b=document.signup.email.value;if(a=="true"){if(validatePassword(c)){passwordlength_success=true;
}else{if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");
$("#password_label").prepend(errorMessage);}passwordlength_success=false;}if(validatePasswordMatch(c,d)&&passwordlength_success==true){passwordmatch_success=true;
}else{if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered passwords does not match");
$("#password_label2").prepend(errorMessage);}passwordmatch_success=false;}if(!validateEmail(b)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}email_success=false;
}else{email_success=true;}if(!validateUsername(f)){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");
errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");errorImg.setAttribute("title","The entered username is either not available or invalid");
$("#username_label").prepend(errorImg);username_success=false;}else{username_success=true;}if(email_success==true&&username_success==true&&passwordlength_success==true&&passwordmatch_success==true){$.post("reference.php",{func:"signup",username:f,email:b,password:MD5(c),recaptcha_challenge_field:document.signup.recaptcha_challenge_field.value,recaptcha_response_field:document.signup.recaptcha_response_field.value,},function(g){if(g=="capcha_error"){window.location="?page=signup&capchaError=true";
}else{if(g=="true"){window.location="?page=search&signupCompleted=true";}}});}else{}}else{var e=$.parseJSON(a);if(e.username_available=="false"){if(!document.getElementById("username_error")){errorImg=document.createElement("img");
errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");
errorImg.setAttribute("title","The entered username is either not available or invalid");$("#username_label").prepend(errorImg);}}else{if(!validateUsername(f)){errorImg=document.createElement("img");
errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");
errorImg.setAttribute("title","The entered username is either not available or invalid");$("#username_label").prepend(errorImg);}}if(e.email_available=="false"){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}else{if(!validateEmail(b)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}}if(!validatePassword(c)){if(!document.getElementById("password_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");$("#password_label").prepend(errorMessage);}password_length=false;
}else{password_length=true;}if(!validatePasswordMatch(c,d)&&password_length==false){if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords does not match");$("#password_label2").prepend(errorMessage);}}}});}function myprofile(){$.post("reference.php",{func:"myprofile",},function(h){var n=$.parseJSON(h);
if(n.length>0){var a=document.getElementById("center");var m=document.createElement("table");m.setAttribute("id","table");var g=document.createElement("tr");
var c=document.createElement("th");c.innerHTML="Filename";var b=document.createElement("th");b.innerHTML="Delete file";g.appendChild(c);g.appendChild(b);
m.appendChild(g);a.appendChild(m);for(var j=0;j<n.length;j++){var l=n[j]["rowID"];var f=n[j]["file"];var o=document.createElement("tr");if(isEven(j)){o.setAttribute("class","alt");
}var e=document.createElement("td");var k=document.createElement("a");k.setAttribute("href","?page=fileinfo&fileID="+l);k.innerHTML=f;e.appendChild(k);
var d=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("title","Delete file");td2Link.setAttribute("onclick","deleteOwnFile("+l+",myprofile)");
td2Link.setAttribute("href","#");td2Img=document.createElement("img");td2Img.setAttribute("src","./img/trash.png");td2Img.setAttribute("height","32");td2Img.setAttribute("width","32");
td2Link.appendChild(td2Img);d.appendChild(td2Link);o.appendChild(e);o.appendChild(d);$("#table").append(o);}}else{errorMessage=document.createElement("div");
errorMessage.setAttribute("id","error");errorMessage.innerHTML="You have no uploads!";$("#center").append(errorMessage);}});}function mySubscriptions(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscriptions",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribtions("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").prepend(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscriptions";$("#mysubs").prepend(f);}});}function mySubscribers(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscribers",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribers("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").append(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscriptions";$("#mysubs").append(f);}});}function myNewFiles(){$("#center").empty();$.get("reference.php",{func:"mysubscriptions",action:"files",},function(w){var t=$.parseJSON(w);
if(t.length>0){var n=document.getElementById("center");var g=document.createElement("br");n.appendChild(g);var u=document.createElement("table");u.setAttribute("id","table");
var j=document.createElement("tr");var e=document.createElement("th");e.innerHTML="Filename";var d=document.createElement("th");d.innerHTML="Uploaded by";
var b=document.createElement("th");b.innerHTML="Uploaded date";j.appendChild(e);j.appendChild(d);j.appendChild(b);u.appendChild(j);n.appendChild(u);for(var r=0;
r<t.length;r++){var c=t[r]["f_rowID"];var v=t[r]["f_file"];var s=t[r]["f_uploaded_by"];var l=t[r]["u_username"];var p=t[r]["f_uploaded_date"];var k=document.createElement("tr");
if(isEven(r)){k.setAttribute("class","alt");}var h=document.createElement("td");var o=document.createElement("a");o.setAttribute("href","?page=fileinfo&fileID="+c);
o.innerHTML=v;h.appendChild(o);var f=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("href","?page=profile&userID="+l);
td2Link.innerHTML=l;f.appendChild(td2Link);td3=document.createElement("td");td3.innerHTML=timeConverter(p);k.appendChild(h);k.appendChild(f);k.appendChild(td3);
u.appendChild(k);}$("#center").append(u);g=document.createElement("br");$("#center").append(g);var q=document.createElement("span");q.setAttribute("class","submit");
var a=document.createElement("input");a.setAttribute("type","button");a.setAttribute("onclick","clearSubList()");a.setAttribute("value","Clear list");q.appendChild(a);
$("#center").append(q);}else{var m=document.createElement("div");m.setAttribute("id","error");m.innerHTML="You have no unseen files";var g=document.createElement("br");
$("#center").append(g);$("#center").append(m);}});}function clearSubList(){$.get("reference.php",{func:"clear_sub_list",},function(a){myNewFiles();});}function loadComments(a){$("#comments").empty();
$.get("reference.php",{func:"comments",file:a,},function(b){var r=document.createElement("h1");r.innerHTML="Comments";$("#comments").append(r);if(b=="false"){if(isLoggedIn()!="false"){var q=document.createElement("div");
q.setAttribute("id","error");q.innerHTML="There is no comments for this file. Why dont you leave one?";var l=document.createElement("br");$("#comments").append(l);
$("#comments").append(q);}}else{var t=$.parseJSON(b);var u=document.createElement("table");u.setAttribute("id","table");var n=document.createElement("tr");
var h=document.createElement("th");h.innerHTML="Comment by";var g=document.createElement("th");g.innerHTML="Date commented";var e=document.createElement("th");
e.innerHTML="Comment";n.appendChild(h);n.appendChild(g);n.appendChild(e);u.appendChild(n);for(var s=0;s<t.length;s++){var f=t[s]["user_row"];var j=t[s]["username"];
var c=t[s]["comment"];var d=t[s]["date_commented"];var o=document.createElement("tr");if(isEven(s)){o.setAttribute("class","alt");}var m=document.createElement("td");
var p=document.createElement("a");p.setAttribute("href","?page=profile&userID="+f);p.innerHTML=j;m.appendChild(p);var k=document.createElement("td");k.innerHTML=timeConverter(d);
td3=document.createElement("td");td3.innerHTML=c;o.appendChild(m);o.appendChild(k);o.appendChild(td3);u.appendChild(o);}$("#comments").append(u);}});}function fileInfo(){var a=qs.fileID;
$.get("reference.php",{func:"fileinfo",file:a,action:"is_reported",},function(b){if(b=="true"){var c=document.createElement("div");c.setAttribute("id","error");
c.innerHTML="Be careful! This file has been reported at abuse! We are on the case. You can still download the file, but: BE CAREFUL!";$("#warning").prepend(c);
}});$.get("reference.php",{func:"fileinfo",action:"fileinfo",file:a,},function(b){if(b=="false"){window.location.href="?page=search";}else{var x=$.parseJSON(b);
var e=x[0]["f_rowID"];var w=x[0]["f_uploaded_by"];var l=x[0]["u_username"];var f=x[0]["u_rowID"];var v=x[0]["f_uploaded_date"];var j=x[0]["f_mimetype"];
var t=x[0]["f_size"];var y=document.createElement("table");y.setAttribute("id","table");var r=document.createElement("th");r.innerHTML="Uploaded by";var q=document.createElement("th");
q.innerHTML="Size";var p=document.createElement("th");p.innerHTML="Date uploaded";var o=document.createElement("th");o.innerHTML="Mimetype";if(j.substring(0,6)=="image/"){var n=document.createElement("th");
n.innerHTML="Dimension";}var m=document.createElement("th");m.innerHTML="Times downloaded";y.appendChild(r);y.appendChild(q);y.appendChild(p);y.appendChild(o);
if(j.substring(0,6)=="image/"){y.appendChild(n);}y.appendChild(m);var k=document.createElement("tr");k.setAttribute("class","alt");var i=document.createElement("td");
td1Link=document.createElement("a");td1Link.setAttribute("href","?page=profile&userID="+f);td1Link.innerHTML=l;i.appendChild(td1Link);var g=document.createElement("td");
g.innerHTML=calcFileSize(t);td3=document.createElement("td");td3.innerHTML=timeConverter(v);td4=document.createElement("td");td4.innerHTML=j;if(j.substring(0,6)=="image/"){var d=document.createElement("td");
var z=new Image();z.src="./printimage.php?id="+e;z.onload=function(){width=this.width;height=this.height;d.innerHTML="Height: "+height+"Width: "+width;
};}var c=document.createElement("td");var u=document.createElement("a");u.setAttribute("href","?page=download_analysis&file="+a);$.get("reference.php",{func:"fileinfo",action:"times_downloaded",file:a,},function(A){u.innerHTML=A;
});c.appendChild(u);k.appendChild(i);k.appendChild(g);k.appendChild(td3);k.appendChild(td4);if(j.substring(0,6)=="image/"){k.appendChild(d);}k.appendChild(c);
y.appendChild(k);$("#cont").prepend(y);var h=document.createElement("br");$("#cont").append(h);$("#cont").append(h);$("#cont").append(h);}var j=x[0]["f_mimetype"];
var e=x[0]["f_rowID"];if(j.substring(0,6)=="image/"){var s=document.createElement("img");s.setAttribute("src","printimage.php?id="+e);s.style.width="30%";
s.style.height="auto";var h=document.createElement("br");$("#cont").append(h);$("#cont").append(s);}});loadComments(a);$.get("reference.php",{func:"isloggedin",},function(c){if(c!="false"){var i=document.createElement("br");
$("#commentform").append(i);var b=document.createElement("form");b.setAttribute("class","form");b.setAttribute("name","comment");var e=document.createElement("span");
textArea1=document.createElement("textarea");textArea1.setAttribute("name","comment");textArea1.setAttribute("cols","40");textArea1.setAttribute("rows","6");
textArea1.setAttribute("Placeholder","Comment");textArea1.setAttribute("id","message");e.appendChild(textArea1);var d=document.createElement("p");d.setAttribute("class","submit");
var f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","submit");f.setAttribute("value","true");var h=document.createElement("input");
h.setAttribute("value","Submit");h.setAttribute("type","button");h.setAttribute("onclick","placeComment()");d.appendChild(h);b.appendChild(f);b.appendChild(e);
b.appendChild(d);$("#commentform").append(b);}else{var g=document.createElement("div");g.setAttribute("id","error");g.innerHTML="In order to comment, you need to ";
var j=document.createElement("a");j.setAttribute("href","?page=login&attemptedSite=fileinfo&file="+a);j.innerHTML="login";g.appendChild(j);$("#commentform").append(g);
}});}function placeComment(){var a=qs.fileID;if(document.comment.comment.value!=""){$.get("reference.php",{func:"place_comment",comment:document.comment.comment.value,file:a,},function(c){loadComments(a);
document.comment.comment.value="";$(".rmMe").remove();});}else{var b=document.createElement("div");b.setAttribute("id","error");b.setAttribute("class","rmMe");
b.innerHTML="The textfield is not filled out correctly";$("#commentform").append(b);}}function reqLogin(){var b=document.login.remember.checked;var c=document.login.username.value;
var a=document.login.password.value;$.post("reference.php",{func:"login",u:c,p:MD5(a),remember:b,},function(d){if(d=="true"){if(qs.attemptedSite&&qs.attemptedSite=="report_abuse"&&qs.reportedFile){window.location.href="?page=report_abuse&reportedFile="+qs.reportedFile;
}else{if(qs.attemptedSite&&qs.fileID&&qs.attemptedSite=="fileinfo"){window.location.href="?page=fileinfo&fileID="+qs.fileID;}else{if(qs.attemptedSite){window.location.href="?page="+qs.attemptedSite;
}else{window.location.href="?page=search";}}}}else{var e=document.createElement("div");e.setAttribute("id","error");e.innerHTML="The username and password does not match";
$("#login").prepend(e);}});return false;}
function deleteOwnFile(a){var b=confirm("Are you sure that you want to delete that file?");if(b==true){window.location.href="?page=delete_file&fileID="+a;
}}function reportFile(a){$.get("reference.php",{func:"isloggedin",},function(b){if(b!="false"){var c=confirm("Are you sure that you want to report this file as abuse?");
if(c==true){$.get("reference.php",{func:"report_abuse",file:a,},function(d){var e=document.getElementById("success");e.innerHTML="The file has reported. Thank you";
});}}else{window.location.href="?page=login&attemptedSite=report_abuse&reportedFile="+a;}});}function adminDeleteFile(a){var b=confirm("Are you sure that you want to delete that file?");
if(b==true){window.location.href="?page=delete_file_admin&fileID="+a;}}function deleteReport(a){var b=confirm("Are you sure that you want to delete the report?");
if(b==true){window.location.href="?page=delete_report&file="+a;}}function calChars(c){var a=document.getElementById("count");var b=255-c.value.length;a.innerHTML=b+" characters left";
}function plusCount(d){if(event.keyCode=="8"||event.keyCode=="46"){var b=document.getElementById("count");var c=d.value.length;var a=255-c+1;b.innerHTML=a+" characters left";
}}function copyToClipboard(a){window.prompt("Copy to clipboard: Ctrl+C, Enter",a);}function validateFacebook(){url="https://graph.facebook.com/"+document.user_pref.facebook_id.value;
$.get(url,function(a){console.log(a);});}function validateTwitter(){$.get("https://api.twitter.com/1/users/show.json",{screen_name:"theadamlt",include_entities:"false",},function(a){console.log(a);
});}function userPref(){var c=document.user_pref.real_name.value;var b=document.user_pref.email.value;var f=document.user_pref.show_name.checked;var a=document.user_pref.show_mail.checked;
var d=document.user_pref.twitter_id.value;var e=document.user_pref.facebook_id.value;if(IsEmpty(c)==true&&validateEmail(b)){$.get("reference.php",{func:"user_pref",real_name:c,email:b,show_real_name:f,show_email:a,twitter_id:d,facebook_id:e,},function(g){if(g=="true"){$(".upSuccess").empty();
$(".upSuccess").hide().html("Your preferences has successfully been updated").fadeIn();$("html,body").animate({scrollTop:$(".upSuccess").offset().top},1000);
}else{$(".upError").empty();$(".upError").hide().html("Something went wrong. Please try again later").fadeIn();$("html,body").animate({scrollTop:$(".upError").offset().top},1000);
}});}else{$(".upError").hide().html("Something's not right. The entered name or email is invalid").fadeIn();$("html,body").animate({scrollTop:$(".upError").offset().top},1000);
}return false;}function newPassword(){var b=MD5(document.newpassword.password.value);var c=MD5(document.newpassword.password2.value);var a=MD5(document.newpassword.curpassword.value);
if(b==c&&b.length>5){$.get("reference.php",{func:"new_password",p1:b,p2:c,cp:a,},function(d){if(d=="false"){$(".npError").hide().html("Something went wrong. Maybe your current password was wrong, or the new passwords didn't match?").fadeIn();
$("html,body").animate({scrollTop:$(".npError").offset().top},1000);}else{$(".npSuccess").hide().html("Your password has been changed").fadeIn("slow");
$("html,body").animate({scrollTop:$("#success").offset().top},1000);$(".npError").empty();$("#np").removeAttr("open");document.newpassword.password.value=null;
document.newpassword.password2.value=null;document.newpassword.curpassword.value=null;}});}else{$(".npError").hide().html("Something went wrong. Maybe your current password was entered wrong, or the new passwords didn't match? The password must be over 5 characters").fadeIn();
}return false;}var reset_passwordArray=new Array();reset_passwordArray.password="false";reset_passwordArray.password2="false";function validate_password_reset(){if(reset_passwordArray.password=="true"&&reset_passwordArray.password2=="true"){document.reset.password.value=MD5(document.reset.password.value);
document.reset.password2.value=MD5(document.reset.password2.value);return true;}else{return false;}}function validateResetPassword1(){if(document.reset.password.value.length>5){if(document.getElementById("password_error")){$("#password_error").remove();
}if(!document.getElementById("password_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered password is valid!");
$("#password2").removeAttr("readonly");$("#password_label").prepend(successMessage);reset_passwordArray.password="true";}}else{if(document.getElementById("password_success")){$("#password_success").remove();
}if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password is invalid. Must be over 5 characters");
$("#password_label").prepend(errorMessage);$("#password2").attr("readonly","readonly");reset_passwordArray.password="false";}}}function validateResetPassword2(){if(document.reset.password.value==document.reset.password2.value){if(document.getElementById("password2_error")){$("#password2_error").remove();
}if(!document.getElementById("password2_success")){successMessage=document.createElement("img");successMessage.setAttribute("id","password2_success");successMessage.setAttribute("height","16");
successMessage.setAttribute("width","16");successMessage.setAttribute("src","./img/success.png");successMessage.setAttribute("title","The entered passwords is matching!");
$("#password2_label").prepend(successMessage);reset_passwordArray.password2="true";}}else{if(document.getElementById("password2_success")){$("#password2_success").remove();
}if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered passwords doesn't match");
$("#password2_label").prepend(errorMessage);reset_passwordArray.password2="false";}}}function validateUsername(b){var a=/^[A-Za-z0-9 ]{3,20}$/;return a.test(b);
}function validateEmail(a){var b=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return b.test(a);}function validatePassword(a){if(a.length>5){return true;
}else{return false;}}function validatePasswordMatch(b,a){if(b==a){return true;}else{return false;}}function validateSignupOnsubmit(){$.get("validate.php",{func:"signup_all",recaptcha_challenge_field:document.getElementById("recaptcha_challenge_field").value,recaptcha_response_field:document.getElementById("recaptcha_response_field").value,u:document.signup.username.value,e:document.signup.email.value},function(d){var i=document.signup.password.value;
var b=document.signup.password2.value;var e=document.signup.username.value;var g=document.signup.email.value;if(d=="true"){if(validatePassword(i)){var a=true;
}else{if(!document.getElementById("password_error")){errorMessage=document.createElement("img");errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");
errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");
$("#password_label").prepend(errorMessage);}var a=false;}if(validatePasswordMatch(i,b)&&a==true){var c=true;}else{if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords does not match");$("#password_label2").prepend(errorMessage);}var c=false;}if(!validateEmail(g)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}var f=false;}else{var f=true;
}if(!validateUsername(e)){errorImg=document.createElement("img");errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");
errorImg.setAttribute("id","username_error");errorImg.setAttribute("title","The entered username is either not available or invalid");$("#username_label").prepend(errorImg);
username_success=false;}else{username_success=true;}if(f==true&&username_success==true&&a==true&&c==true){$.post("reference.php",{func:"signup",username:e,email:g,password:MD5(i),recaptcha_challenge_field:document.signup.recaptcha_challenge_field.value,recaptcha_response_field:document.signup.recaptcha_response_field.value,},function(j){if(j=="capcha_error"){window.location="?page=signup&capchaError=true";
}else{if(j=="true"){window.location="?page=search&signupCompleted=true";}}});}else{}}else{var h=$.parseJSON(d);if(h.username_available=="false"){if(!document.getElementById("username_error")){errorImg=document.createElement("img");
errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");
errorImg.setAttribute("title","The entered username is either not available or invalid");$("#username_label").prepend(errorImg);}}else{if(!validateUsername(e)){errorImg=document.createElement("img");
errorImg.setAttribute("src","./img/error.png");errorImg.setAttribute("height","16");errorImg.setAttribute("width","16");errorImg.setAttribute("id","username_error");
errorImg.setAttribute("title","The entered username is either not available or invalid");$("#username_label").prepend(errorImg);}}if(h.email_available=="false"){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}else{if(!validateEmail(g)){if(!document.getElementById("email_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","email_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered email is either not available or invalid");$("#email_label").prepend(errorMessage);}}}if(!validatePassword(i)){if(!document.getElementById("password_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered password invalid, must be over 5 charachers");$("#password_label").prepend(errorMessage);}password_length=false;
}else{password_length=true;}if(!validatePasswordMatch(i,b)&&password_length==false){if(!document.getElementById("password2_error")){errorMessage=document.createElement("img");
errorMessage.setAttribute("id","password2_error");errorMessage.setAttribute("height","16");errorMessage.setAttribute("width","16");errorMessage.setAttribute("src","./img/error.png");
errorMessage.setAttribute("title","The entered passwords does not match");$("#password_label2").prepend(errorMessage);}}}});}function myprofile(){$.post("reference.php",{func:"myprofile",},function(h){var n=$.parseJSON(h);
if(n.length>0){var a=document.getElementById("center");var m=document.createElement("table");m.setAttribute("id","table");var g=document.createElement("tr");
var c=document.createElement("th");c.innerHTML="Filename";var b=document.createElement("th");b.innerHTML="Delete file";g.appendChild(c);g.appendChild(b);
m.appendChild(g);a.appendChild(m);for(var j=0;j<n.length;j++){var l=n[j]["rowID"];var f=n[j]["file"];var o=document.createElement("tr");if(isEven(j)){o.setAttribute("class","alt");
}var e=document.createElement("td");var k=document.createElement("a");k.setAttribute("href","?page=fileinfo&fileID="+l);k.innerHTML=f;e.appendChild(k);
var d=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("title","Delete file");td2Link.setAttribute("onclick","deleteOwnFile("+l+",myprofile)");
td2Link.setAttribute("href","#");td2Img=document.createElement("img");td2Img.setAttribute("src","./img/trash.png");td2Img.setAttribute("height","32");td2Img.setAttribute("width","32");
td2Link.appendChild(td2Img);d.appendChild(td2Link);o.appendChild(e);o.appendChild(d);$("#table").append(o);}}else{errorMessage=document.createElement("div");
errorMessage.setAttribute("id","error");errorMessage.innerHTML="You have no uploads!";$("#center").append(errorMessage);}});}function mySubscriptions(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscriptions",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribtions("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").prepend(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscriptions";$("#mysubs").prepend(f);}});}function mySubscribers(){$.get("reference.php",{func:"mysubscriptions",action:"mysubscribers",},function(h){var c=$.parseJSON(h);
if(c.length>0){var g=document.createElement("details");var a=document.createElement("summary");a.innerHTML="My subscribers("+c.length+")";g.appendChild(a);
for(var b=0;b<c.length;b++){var e=document.createElement("a");e.setAttribute("href","?page=profile&userID="+c[b]["u_rowID"]);e.innerHTML=c[b]["u_username"];
g.appendChild(e);var d=document.createElement("br");g.appendChild(d);}$("#mysubs").append(g);}else{var f=document.createElement("div");f.setAttribute("id","error");
f.innerHTML="You have no subscriptions";$("#mysubs").append(f);}});}function myNewFiles(){$("#center").empty();$.get("reference.php",{func:"mysubscriptions",action:"files",},function(w){var t=$.parseJSON(w);
if(t.length>0){var n=document.getElementById("center");var g=document.createElement("br");n.appendChild(g);var u=document.createElement("table");u.setAttribute("id","table");
var j=document.createElement("tr");var e=document.createElement("th");e.innerHTML="Filename";var d=document.createElement("th");d.innerHTML="Uploaded by";
var b=document.createElement("th");b.innerHTML="Uploaded date";j.appendChild(e);j.appendChild(d);j.appendChild(b);u.appendChild(j);n.appendChild(u);for(var r=0;
r<t.length;r++){var c=t[r]["f_rowID"];var v=t[r]["f_file"];var s=t[r]["f_uploaded_by"];var l=t[r]["u_username"];var p=t[r]["f_uploaded_date"];var k=document.createElement("tr");
if(isEven(r)){k.setAttribute("class","alt");}var h=document.createElement("td");var o=document.createElement("a");o.setAttribute("href","?page=fileinfo&fileID="+c);
o.innerHTML=v;h.appendChild(o);var f=document.createElement("td");td2Link=document.createElement("a");td2Link.setAttribute("href","?page=profile&userID="+l);
td2Link.innerHTML=l;f.appendChild(td2Link);td3=document.createElement("td");td3.innerHTML=timeConverter(p);k.appendChild(h);k.appendChild(f);k.appendChild(td3);
u.appendChild(k);}$("#center").append(u);g=document.createElement("br");$("#center").append(g);var q=document.createElement("span");q.setAttribute("class","submit");
var a=document.createElement("input");a.setAttribute("type","button");a.setAttribute("onclick","clearSubList()");a.setAttribute("value","Clear list");q.appendChild(a);
$("#center").append(q);}else{var m=document.createElement("div");m.setAttribute("id","error");m.innerHTML="You have no unseen files";var g=document.createElement("br");
$("#center").append(g);$("#center").append(m);}});}function clearSubList(){$.get("reference.php",{func:"clear_sub_list",},function(a){myNewFiles();});}function loadComments(a){$("#comments").empty();
$.get("reference.php",{func:"comments",file:a,},function(b){var r=document.createElement("h1");r.innerHTML="Comments";$("#comments").append(r);if(b=="false"){if(isLoggedIn()!="false"){var q=document.createElement("div");
q.setAttribute("id","error");q.innerHTML="There is no comments for this file. Why dont you leave one?";var l=document.createElement("br");$("#comments").append(l);
$("#comments").append(q);}}else{var t=$.parseJSON(b);var u=document.createElement("table");u.setAttribute("id","table");var n=document.createElement("tr");
var h=document.createElement("th");h.innerHTML="Comment by";var g=document.createElement("th");g.innerHTML="Date commented";var e=document.createElement("th");
e.innerHTML="Comment";n.appendChild(h);n.appendChild(g);n.appendChild(e);u.appendChild(n);for(var s=0;s<t.length;s++){var f=t[s]["user_row"];var j=t[s]["username"];
var c=t[s]["comment"];var d=t[s]["date_commented"];var o=document.createElement("tr");if(isEven(s)){o.setAttribute("class","alt");}var m=document.createElement("td");
var p=document.createElement("a");p.setAttribute("href","?page=profile&userID="+f);p.innerHTML=j;m.appendChild(p);var k=document.createElement("td");k.innerHTML=timeConverter(d);
td3=document.createElement("td");td3.innerHTML=c;o.appendChild(m);o.appendChild(k);o.appendChild(td3);u.appendChild(o);}$("#comments").append(u);}});}function fileInfo(){var a=qs.fileID;
$.get("reference.php",{func:"fileinfo",file:a,action:"is_reported",},function(b){if(b=="true"){var c=document.createElement("div");c.setAttribute("id","error");
c.innerHTML="Be careful! This file has been reported at abuse! We are on the case. You can still download the file, but: BE CAREFUL!";$("#warning").prepend(c);
}});$.get("reference.php",{func:"fileinfo",action:"fileinfo",file:a,},function(b){if(b=="false"){window.location.href="?page=search";}else{var x=$.parseJSON(b);
var e=x[0]["f_rowID"];var w=x[0]["f_uploaded_by"];var l=x[0]["u_username"];var f=x[0]["u_rowID"];var v=x[0]["f_uploaded_date"];var j=x[0]["f_mimetype"];
var t=x[0]["f_size"];var y=document.createElement("table");y.setAttribute("id","table");var r=document.createElement("th");r.innerHTML="Uploaded by";var q=document.createElement("th");
q.innerHTML="Size";var p=document.createElement("th");p.innerHTML="Date uploaded";var o=document.createElement("th");o.innerHTML="Mimetype";if(j.substring(0,6)=="image/"){var n=document.createElement("th");
n.innerHTML="Dimension";}var m=document.createElement("th");m.innerHTML="Times downloaded";y.appendChild(r);y.appendChild(q);y.appendChild(p);y.appendChild(o);
if(j.substring(0,6)=="image/"){y.appendChild(n);}y.appendChild(m);var k=document.createElement("tr");k.setAttribute("class","alt");var i=document.createElement("td");
td1Link=document.createElement("a");td1Link.setAttribute("href","?page=profile&userID="+f);td1Link.innerHTML=l;i.appendChild(td1Link);var g=document.createElement("td");
g.innerHTML=calcFileSize(t);td3=document.createElement("td");td3.innerHTML=timeConverter(v);td4=document.createElement("td");td4.innerHTML=j;if(j.substring(0,6)=="image/"){var d=document.createElement("td");
var z=new Image();z.src="./printimage.php?id="+e;z.onload=function(){width=this.width;height=this.height;d.innerHTML="Height: "+height+"Width: "+width;
};}var c=document.createElement("td");var u=document.createElement("a");u.setAttribute("href","?page=download_analysis&file="+a);$.get("reference.php",{func:"fileinfo",action:"times_downloaded",file:a,},function(A){u.innerHTML=A;
});c.appendChild(u);k.appendChild(i);k.appendChild(g);k.appendChild(td3);k.appendChild(td4);if(j.substring(0,6)=="image/"){k.appendChild(d);}k.appendChild(c);
y.appendChild(k);$("#cont").prepend(y);var h=document.createElement("br");$("#cont").append(h);$("#cont").append(h);$("#cont").append(h);}var j=x[0]["f_mimetype"];
var e=x[0]["f_rowID"];if(j.substring(0,6)=="image/"){var s=document.createElement("img");s.setAttribute("src","printimage.php?id="+e);s.style.width="30%";
s.style.height="auto";var h=document.createElement("br");$("#cont").append(h);$("#cont").append(s);}});loadComments(a);$.get("reference.php",{func:"isloggedin",},function(c){if(c!="false"){var i=document.createElement("br");
$("#commentform").append(i);var b=document.createElement("form");b.setAttribute("class","form");b.setAttribute("name","comment");var e=document.createElement("span");
textArea1=document.createElement("textarea");textArea1.setAttribute("name","comment");textArea1.setAttribute("cols","40");textArea1.setAttribute("rows","6");
textArea1.setAttribute("Placeholder","Comment");textArea1.setAttribute("id","message");e.appendChild(textArea1);var d=document.createElement("p");d.setAttribute("class","submit");
var f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name","submit");f.setAttribute("value","true");var h=document.createElement("input");
h.setAttribute("value","Submit");h.setAttribute("type","button");h.setAttribute("onclick","placeComment()");d.appendChild(h);b.appendChild(f);b.appendChild(e);
b.appendChild(d);$("#commentform").append(b);}else{var g=document.createElement("div");g.setAttribute("id","error");g.innerHTML="In order to comment, you need to ";
var j=document.createElement("a");j.setAttribute("href","?page=login&attemptedSite=fileinfo&file="+a);j.innerHTML="login";g.appendChild(j);$("#commentform").append(g);
}});}function placeComment(){var a=qs.fileID;if(document.comment.comment.value!=""){$.get("reference.php",{func:"place_comment",comment:document.comment.comment.value,file:a,},function(c){loadComments(a);
document.comment.comment.value="";$(".rmMe").remove();});}else{var b=document.createElement("div");b.setAttribute("id","error");b.setAttribute("class","rmMe");
b.innerHTML="The textfield is not filled out correctly";$("#commentform").append(b);}}function reqLogin(){var b=document.login.remember.checked;var c=document.login.username.value;
var a=document.login.password.value;$.post("reference.php",{func:"login",u:c,p:MD5(a),remember:b,},function(d){if(d=="true"){if(qs.attemptedSite&&qs.attemptedSite=="report_abuse"&&qs.reportedFile){window.location.href="?page=report_abuse&reportedFile="+qs.reportedFile;
}else{if(qs.attemptedSite&&qs.fileID&&qs.attemptedSite=="fileinfo"){window.location.href="?page=fileinfo&fileID="+qs.fileID;}else{if(qs.attemptedSite){window.location.href="?page="+qs.attemptedSite;
}else{window.location.href="?page=search";}}}}else{$("#error").html("The username and password does not match").hide().fadeIn();$("html,body").animate({scrollTop:$("#error").offset().top},1000);
}});return false;}function forgotPassword(){var a=document.forgot_password.email.value;var b=document.forgot_password.username.value;$.get("reference.php",{func:"forgot_password",email:a,username:b,},function(c){if(c=="false"){$("#error").html("The entered username and email does not match").hide().fadeIn();
}else{if(c=="email_error"){$("#error").empty().html("An error occured. Please try again later").hide().fadeIn();}else{$("#error").empty();$("#forgot").empty();
$("#mes").remove();$("#success").html("An email has been sent to you at "+a).hide().fadeIn();}}});return false;}